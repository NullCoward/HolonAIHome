<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trigger Scripts - HolonicEngine Wiki</title>
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --bg-void: #0a0a0f;
            --bg-surface: rgba(15, 15, 25, 0.8);
            --bg-elevated: rgba(20, 20, 35, 0.9);
            --foam-1: #00ffcc;
            --foam-2: #00d4ff;
            --text-primary: rgba(255, 255, 255, 0.95);
            --text-secondary: rgba(255, 255, 255, 0.7);
            --text-muted: rgba(255, 255, 255, 0.4);
            --border-subtle: rgba(255, 255, 255, 0.08);
            --border-glow: rgba(0, 212, 255, 0.3);
        }
        body { background: var(--bg-void); min-height: 100vh; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; color: var(--text-primary); line-height: 1.6; }
        .void-bg { position: fixed; inset: 0; background: radial-gradient(ellipse at 30% 20%, rgba(0, 100, 150, 0.08) 0%, transparent 50%), radial-gradient(ellipse at 50% 50%, #0d0d15 0%, var(--bg-void) 70%); z-index: 0; }
        .wiki-container { position: relative; z-index: 10; display: flex; min-height: 100vh; }
        .sidebar { width: 280px; background: var(--bg-surface); border-right: 1px solid var(--border-subtle); padding: 2rem 0 5rem 0; position: fixed; height: 100vh; overflow-y: auto; backdrop-filter: blur(20px); }
        .sidebar-header { padding: 0 1.5rem 1.5rem; border-bottom: 1px solid var(--border-subtle); margin-bottom: 1rem; }
        .sidebar-logo { display: flex; align-items: center; gap: 0.75rem; text-decoration: none; color: var(--text-primary); }
                .sidebar-logo-icon {
            position: relative;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: linear-gradient(145deg, rgba(20, 20, 30, 0.95), rgba(8, 8, 15, 0.98));
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            box-shadow:
                inset 0 1px 2px rgba(255, 255, 255, 0.1),
                inset 0 -1px 3px rgba(0, 0, 0, 0.5);
        }

        .sidebar-logo-icon::before {
            content: '';
            position: absolute;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: conic-gradient(
                from 0deg,
                var(--foam-1),
                var(--foam-2),
                var(--foam-3),
                var(--foam-4),
                var(--foam-1)
            );
            filter: blur(8px);
            opacity: 0.8;
            z-index: -1;
            animation: logoGlowSpin 8s linear infinite;
        }

        .sidebar-logo-icon::after {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: 50%;
            background: linear-gradient(150deg, rgba(255, 255, 255, 0.08) 0%, transparent 50%);
            pointer-events: none;
        }

        .sidebar-logo-icon img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            border-radius: 50%;
        }

        @keyframes logoGlowSpin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(10, 10, 15, 0.5);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, var(--foam-2), var(--foam-3));
            border-radius: 4px;
            border: 1px solid rgba(0, 0, 0, 0.3);
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, var(--foam-1), var(--foam-2));
        }

        /* Firefox scrollbar */
        * {
            scrollbar-width: thin;
            scrollbar-color: var(--foam-2) rgba(10, 10, 15, 0.5);
        }

        .sidebar-logo-text { font-size: 1.1rem; font-weight: 600; }
        .sidebar-tagline { margin-top: 0.5rem; font-size: 0.8rem; color: var(--foam-2); font-style: italic; }
        .nav-section { padding: 1rem 1.5rem 0.5rem; font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.1em; color: var(--text-muted); font-weight: 600; }
        .nav-link { display: block; padding: 0.6rem 1.5rem; color: var(--text-secondary); text-decoration: none; font-size: 0.9rem; border-left: 2px solid transparent; transition: all 0.2s; }
        .nav-link:hover { color: var(--text-primary); background: rgba(0, 212, 255, 0.05); border-left-color: var(--foam-2); }
        .nav-link.active { color: var(--foam-2); background: rgba(0, 212, 255, 0.08); border-left-color: var(--foam-2); }
        .back-link { display: flex; align-items: center; gap: 0.5rem; padding: 1rem 1.5rem; color: var(--text-muted); text-decoration: none; font-size: 0.85rem; border-top: 1px solid var(--border-subtle); position: fixed; bottom: 0; left: 0; width: 280px; background: var(--bg-surface); backdrop-filter: blur(20px); }
        .back-link:hover { color: var(--text-secondary); }
        .main-content { flex: 1; margin-left: 280px; padding: 3rem 4rem 4rem; max-width: 900px; }
        h1 { font-size: 2.5rem; font-weight: 300; margin-bottom: 2rem; background: linear-gradient(135deg, var(--text-primary), var(--foam-2)); -webkit-background-clip: text; background-clip: text; color: transparent; }
        h2 { font-size: 1.5rem; font-weight: 500; margin: 2.5rem 0 1rem; color: var(--text-primary); padding-bottom: 0.5rem; border-bottom: 1px solid var(--border-subtle); }
        h3 { font-size: 1.15rem; font-weight: 600; margin: 1.5rem 0 0.75rem; color: var(--foam-1); }
        p { margin-bottom: 1rem; color: var(--text-secondary); }
        strong { color: var(--text-primary); }
        em { color: var(--foam-2); font-style: italic; }
        ul, ol { margin: 1rem 0; padding-left: 1.5rem; }
        li { margin-bottom: 0.5rem; color: var(--text-secondary); }
        pre { background: var(--bg-elevated); border: 1px solid var(--border-subtle); border-radius: 8px; padding: 1.25rem; overflow-x: auto; margin: 1.5rem 0; font-family: 'SF Mono', 'Fira Code', monospace; font-size: 0.85rem; line-height: 1.5; white-space: pre-wrap; word-wrap: break-word; }
        code { font-family: 'SF Mono', 'Fira Code', monospace; font-size: 0.9em; color: var(--foam-2); }
        pre code { color: var(--text-secondary); }
        blockquote { border-left: 3px solid var(--foam-2); padding: 1rem 1.5rem; margin: 1.5rem 0; background: rgba(0, 212, 255, 0.05); border-radius: 0 8px 8px 0; }
        blockquote p { margin: 0; color: var(--text-primary); font-size: 1.1rem; }
        table { width: 100%; border-collapse: collapse; margin: 1.5rem 0; }
        th, td { padding: 0.75rem 1rem; text-align: left; border-bottom: 1px solid var(--border-subtle); }
        th { color: var(--foam-1); font-weight: 600; background: var(--bg-elevated); }
        td { color: var(--text-secondary); }
        hr { border: none; border-top: 1px solid var(--border-subtle); margin: 2rem 0; }
        a { color: var(--foam-2); text-decoration: none; }
        a:hover { text-decoration: underline; }
        @media (max-width: 900px) {
            .sidebar { width: 100%; height: auto; position: relative; padding-bottom: 1rem; }
            .main-content { margin-left: 0; padding: 2rem 1.5rem; }
            .back-link { position: relative; width: 100%; }
        }
    </style>
</head>
<body>
    <div class="void-bg"></div>
    <div class="wiki-container">
        <nav class="sidebar">
            <div class="sidebar-header">
                <a href="/wiki/" class="sidebar-logo">
                    <div class="sidebar-logo-icon"><img src="/HolonAI.png" alt="Holonic"></div>
                    <span class="sidebar-logo-text">HolonicEngine</span>
                </a>
                <div class="sidebar-tagline">Agents with Agency</div>
            </div>
            <div class="nav-section">Core Concepts</div>
            <a href="/wiki/" class="nav-link">Overview</a>
<a href="/wiki/holon.html" class="nav-link">What is a Holon?</a>
<a href="/wiki/architecture.html" class="nav-link">Architecture</a>
<a href="/wiki/memory-lattice.html" class="nav-link">Memory Lattice</a>
            <div class="nav-section">Systems</div>
            <a href="/wiki/heartbeat.html" class="nav-link">Heartbeat System</a>
<a href="/wiki/triggers.html" class="nav-link active">Trigger Scripts</a>
<a href="/wiki/token-hud.html" class="nav-link">Token HUD</a>
            <div class="nav-section">Vision</div>
            <a href="/wiki/creativity.html" class="nav-link">Cross-Domain Creativity</a>
<a href="/wiki/glossary.html" class="nav-link">Glossary</a>
        </nav>
        <a href="/" class="back-link"><span>&larr;</span> Back to Holonic.org</a>
        <main class="main-content">
            <h1>Trigger Scripts</h1>
            <strong>Trigger Scripts</strong> are AI-authored automations - pre-written responses to known patterns that execute without LLM cost.

<hr>

<h2>The Core Idea</h2>

<p>Humans automate themselves all the time:
<ul>
<li>Email filters that sort incoming mail</li>
<li>Phone rules that silence notifications at night</li>
<li>Habits that run without conscious thought</li>
</ul></p>

<p>Why can't AI agents do the same?</p>

<strong>Trigger Scripts</strong> let the agent write its own automations:

<pre><code class="">TRIGGER: email.received(from='<em>@anthropic.com')
SCRIPT:
  1. email_holon.summarize(incoming)
  2. anthropic_contact.update(incoming)
  3. notify_me("Email from Anthropic!")
</code></pre>

<p>When the trigger condition is met, the script executes <strong>without invoking the LLM</strong>. Token-free automation.</p>

<hr>

<h2>Why This Matters</h2>

<h3>Current Agent Pattern</h3>

<pre><code class="">Event occurs → Invoke LLM → LLM decides response → Execute
</code></pre>

<p>Every event costs tokens. Even predictable, repetitive responses.</p>

<h3>With Trigger Scripts</h3>

<pre><code class="">Event occurs → Check triggers → Match found?
├── YES → Execute script (no LLM) → Log to history
└── NO  → Invoke LLM → Decide response → Maybe create trigger for next time
</code></pre>

<p>The agent <strong>learns</strong> to automate. Over time, more and more patterns become scripted.</p>

<hr>

<h2>Anatomy of a Trigger Script</h2>

<pre><code class="javascript">{
  // When to fire
  "trigger": {
    "event": "email.received",
    "conditions": {
      "from": "</em>@anthropic.com"
    }
  },

<p>// What to do
  "script": [
    {"action": "email_holon.summarize", "args": {"message": "$incoming"}},
    {"action": "anthropic_contact.update", "args": {"message": "$incoming"}},
    {"action": "notify_me", "args": {"text": "Email from Anthropic!"}}
  ],</p>

<p>// Metadata
  "created_by": "root_holon",
  "created_at": "2025-12-05",
  "last_fired": null,
  "fire_count": 0,</p>

<p>// Control
  "enabled": true,
  "max_fires": null,  // null = unlimited
  "cooldown": "5 minutes"
}
</code></pre></p>

<hr>

<h2>Trigger Types</h2>

<h3>Event-Based</h3>

<p>Fire when something happens:</p>

<pre><code class="javascript">// External events
"email.received(from='...')"
"api.response(status=200)"
"file.created(path='/data/<em>')"
"webhook.received(source='stripe')"

<p>// Internal events
"holon.spawned(name='</em>')"
"action.completed(name='research')"
"memory.updated(key='important')"
"error.occurred(severity='high')"
</code></pre></p>

<h3>Time-Based</h3>

<p>Fire on schedule:</p>

<pre><code class="javascript">// Recurring
"schedule('every 1 hour')"
"schedule('daily at 9am')"
"schedule('weekdays at 6pm')"

<p>// Relative to heartbeat
"heartbeat(every=10)"  // Every 10th heartbeat
"heartbeat(offset=5)"  // 5 beats from now
</code></pre></p>

<h3>Condition-Based</h3>

<p>Fire when state matches:</p>

<pre><code class="javascript">// Resource conditions
"token_budget &lt; 1000"
"memory.size &gt; 50000"
"holon.count &gt; 100"

<p>// State conditions
"memory.contains('urgent')"
"queue.length &gt; 5"
"last_user_contact &gt; '1 hour'"
</code></pre></p>

<h3>Manual</h3>

<p>Fire when explicitly called:</p>

<pre><code class="javascript">"manual('do_weekly_review')"
"manual('cleanup_old_holons')"
</code></pre>

<hr>

<h2>Script Actions</h2>

<p>Scripts are sequences of holon actions:</p>

<pre><code class="javascript">"script": [
  // Call any holon's action
  {"action": "stripe_holon.create_payment", "args": {...}},

<p>// Reference results from previous steps
  {"action": "log_holon.record", "args": {"result": "$prev"}},</p>

<p>// Conditional execution
  {"if": "$prev.success", "action": "notify_me", "args": {...}},</p>

<p>// Spawn new holons
  {"action": "spawn_holon", "args": {"purpose": "Handle this case"}},</p>

<p>// Modify state
  {"action": "memory.write", "args": {"key": "last_processed", "value": "$now"}}
]
</code></pre></p>

<hr>

<h2>The "Compiled Cognition" Metaphor</h2>

<p>This mirrors how human brains work:</p>

<table><thead><tr>
<th>Stage</th>
<th>Human</th>
<th>Holonic Agent</th>
</tr></thead><tbody>
<tr>
<td><strong>Novel situation</strong></td>
<td>Conscious thought (slow, effortful)</td>
<td>LLM call (expensive)</td>
</tr>
<tr>
<td><strong>Pattern recognized</strong></td>
<td>Start building habit</td>
<td>Consider creating trigger</td>
</tr>
<tr>
<td><strong>Pattern repeated</strong></td>
<td>Habit forms</td>
<td>Trigger script written</td>
</tr>
<tr>
<td><strong>Pattern encountered</strong></td>
<td>Automatic response (fast, effortless)</td>
<td>Script fires (free)</td>
</tr>
<tr>
<td><strong>Something unexpected</strong></td>
<td>Habit breaks, conscious review</td>
<td>Script fails, escalate to LLM</td>
</tr>
</tbody></table>
The agent <strong>compiles</strong> repeated cognition into automation.

<hr>

<h2>Observability</h2>

<p>Scripts execute without the LLM, but the agent still <strong>sees what happened</strong>:</p>

<pre><code class="">ACTION HISTORY (Heartbeat 47)
├── [TRIGGER] email_filter_anthropic fired
│   ├── email_holon.summarize → "Partnership inquiry from Dario"
│   ├── anthropic_contact.update → contact added
│   └── notify_me → notification sent
│
├── [TRIGGER] daily_memory_cleanup fired
│   ├── old_memories.prune → removed 12 holons
│   └── lattice.optimize → reduced fragmentation 15%
│
└── [LLM] User request handled
    └── ... normal response ...
</code></pre>

<p>On the next LLM call, the agent can review its action history and:
<ul>
<li>See that triggers fired</li>
<li>Notice if something went wrong</li>
<li>Adjust or repair scripts</li>
</ul></p>

<hr>

<h2>Self-Repair</h2>

<p>When scripts fail or produce unexpected results:</p>

<pre><code class="">ACTION HISTORY
├── [TRIGGER] auto_responder fired
│   ├── draft_response → "Thanks for your email..."
│   └── send_email → ERROR: recipient rejected
│
└── Script failure logged

<p>NEXT HEARTBEAT (LLM)
├── Agent sees: "auto_responder failed - recipient rejected"
├── Agent investigates: "Ah, the email address changed"
├── Agent fixes: Updates script with new address
└── Agent adds: Condition to check address validity first
</code></pre></p>

<p>The agent maintains its own automations.</p>

<hr>

<h2>Example Scripts</h2>

<h3>Email Triage</h3>

<pre><code class="javascript">{
  "trigger": "email.received",
  "script": [
    {"action": "email_holon.categorize", "args": {"message": "$incoming"}},
    {"if": "$prev.category == 'urgent'",
     "action": "demand_queue.add", "args": {"priority": "high", "item": "$incoming"}},
    {"if": "$prev.category == 'newsletter'",
     "action": "reading_list.add", "args": {"item": "$incoming"}},
    {"action": "email_memory.log", "args": {"summary": "$prev.summary"}}
  ]
}
</code></pre>

<h3>Daily Review</h3>

<pre><code class="javascript">{
  "trigger": "schedule('daily at 7am')",
  "script": [
    {"action": "memory_holon.generate_summary", "args": {"period": "yesterday"}},
    {"action": "calendar_holon.get_today", "args": {}},
    {"action": "priorities_holon.refresh", "args": {"summary": "$step1", "calendar": "$step2"}},
    {"action": "notify_me", "args": {"text": "Daily brief ready"}}
  ]
}
</code></pre>

<h3>API Rate Limit Handler</h3>

<pre><code class="javascript">{
  "trigger": "api.response(status=429)",
  "script": [
    {"action": "api_queue.pause", "args": {"duration": "1 minute"}},
    {"action": "log", "args": {"message": "Rate limited, pausing"}},
    {"action": "schedule_retry", "args": {"after": "2 minutes"}}
  ]
}
</code></pre>

<hr>

<h2>Creating Triggers</h2>

<p>The agent creates triggers through normal actions:</p>

<pre><code class="python"># Agent decides to automate something
@holon.action
def create_trigger(event: str, script: list, name: str):
    """Create a new trigger script."""
    trigger = {
        "name": name,
        "trigger": event,
        "script": script,
        "created_by": holon.name,
        "created_at": now(),
        "enabled": True
    }
    trigger_registry.add(trigger)
    return f"Trigger '{name}' created"
</code></pre>

<p>The agent just calls <code>create_trigger</code> like any other action.</p>

<hr>

<h2>See Also</h2>

<ul>
<li>[Architecture](architecture.md) - How triggers fit the system</li>
<li>[Heartbeat System](heartbeat-system.md) - When triggers are checked</li>
<li>[Holons](holons.md) - Actions that scripts call</li>
</ul>
        </main>
    </div>
</body>
</html>